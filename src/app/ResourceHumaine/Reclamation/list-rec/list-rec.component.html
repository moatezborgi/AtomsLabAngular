<div class="page-wrapper">
  <div class="content">

    <div class="page-header">
      <div class="row">
        <div class="col-sm-12">
          <ul class="breadcrumb">
            <li class="breadcrumb-item"><a routerLink="/home">Dashboard </a></li>
            <li class="breadcrumb-item"><i class="feather-chevron-right"></i></li>
            <li class="breadcrumb-item active">Reclamation List</li>
          </ul>
        </div>
      </div>
    </div>
    <!--    &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
    <div class="table-responsive">

      <div class="row">
        <div class="col-sm-12">
          <div class="card card-table show-entire">
            <div class="card-body">

              <div class="page-table-header mb-2">
                <div class="row align-items-center">
                  <div class="col">
                    <div class="doctor-table-blk">
                      <h3>Reclamation List</h3>
                      <div class="doctor-search-blk">
                        <div class="top-nav-search table-search-blk">
                          <form>
                            <input class="form-control" placeholder="Search here" type="text" [(ngModel)]="searchTerm" [ngModelOptions]="{standalone: true}">
                            <a class="btn"><img alt="" src="assets/img/icons/search-normal.svg"></a>
                          </form>
                        </div>
                        <div class="add-group">
                          <a [routerLink]="['/AddRec/hamdayedes']" class="btn btn-primary add-pluss ms-2"><img
                            alt="" src="assets/img/icons/plus.svg"></a>
                          <a class="btn btn-primary doctor-refresh ms-2" ref="javascript:;"><img
                            alt="" src="assets/img/icons/re-fresh.svg"></a>

                        </div>
                      </div>
                    </div>
                  </div>
                  <table class="table border-0 custom-table comman-table datatable mb-0">
                    <thead>
                    <tr>
                      <th>
                        <div class="form-check check-tables">
                          <input class="form-check-input" type="checkbox" value="something">
                        </div>
                      </th>
                      <th>Username</th>
                      <th>Date Reclamation</th>
                      <th>Description</th>
                      <th>Status</th>
                      <th>Accept</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let i of table | filter:searchTerm | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage }">
                      <td>
                        <div class="form-check check-tables">
                          <input class="form-check-input" type="checkbox" value="something">
                        </div>
                      </td>
                      <td class="profile-image"><img width="28" height="28" src="assets/img/profiles/avatar-01.jpg" class="rounded-circle m-r-5" alt=""> {{i.user.username}}</td>
                      <td>{{i.dateHeureReclamation}}</td>
                      <td>{{i.descReclamation}}</td>
                      <td *ngIf="i.etatreclam==true"><button class="custom-badge status-green ">Traite</button></td>
                      <td *ngIf="i.etatreclam==false"><button class="custom-badge status-red ">Non traite</button></td>
<!--                      <td><button class="custom-badge status-purple ">{{i.duty.type}}</button></td>-->
                      <td *ngIf="i.etatreclam==true  && i.accept==1"><button class="custom-badge status-gray " disabled>Approved</button></td>
                      <td *ngIf="username=='admin' && i.etatreclam==false && i.accept==0"><button class="custom-badge status-blue " (click)="Accept(i.idReclamation)">Approve</button></td>
                      <td *ngIf="username=='admin' && i.etatreclam==false && i.accept==0"><button class="custom-badge status-blue " (click)="Reject(i.idReclamation)">Reject</button></td>
                      <td *ngIf="i.etatreclam==true  && i.accept==-1"><button class="custom-badge status-pink " disabled>Rejected</button></td>
                      <td *ngIf="username=='admin' && i.etatreclam==true  && i.accept==-1"></td>
                      <td *ngIf="username=='admin' && i.etatreclam==true  && i.accept==1"></td>
                      <td *ngIf="username!='admin' && i.etatreclam==false  && i.accept==0"><button class="custom-badge status-gray " disabled>On Hold</button></td>

                      <td class="text-end">
                        <div class="dropdown dropdown-action">
                          <a aria-expanded="false" class="action-icon dropdown-toggle" data-bs-toggle="dropdown"
                             href="#"><i class="fa fa-ellipsis-v"></i></a>
                          <div class="dropdown-menu dropdown-menu-end">
                            <a class="dropdown-item"  [routerLink]="['/UpdateDuty', i.idPlanificationDuty, i.user.username]">
                              <i class="fa-solid fa-pen-to-square m-r-5"></i> Edit</a>
                            <a class="dropdown-item" data-bs-target="#delete_patient" data-bs-toggle="modal" (click)="deleteEvent(i.idPlanificationDuty)"><i class="fa fa-trash-alt m-r-5"></i> Delete</a>
                          </div>
                        </div>
                      </td>


                    </tbody>
                  </table>
                  <pagination-controls (pageChange)="currentPage = $event"></pagination-controls>

                </div>


              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
